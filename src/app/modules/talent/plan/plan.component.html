<div class="page-content">
  <div class="main-wrapper">

      <!-- Loader for Plans -->
      <div *ngIf="isLoadingPlans" class="loader-container py-5">
        <div class="loader"></div>
        <p>Loading plans, please wait...</p>
      </div>

      <!-- If not loading, show the plans -->
      <div *ngIf="!isLoadingPlans">
        <div class="card subscription-plan">
          <h2>Subscription Plans</h2>
        
          <div class="row mt-3">

            <!-- premium plans -->
            <div class="col-lg-4 my-2 " *ngFor="let plan of premiumPlans">          
              <div class="subscription-switch mb-2">
                <label class="switch_off cursor-pointer" (click)="toggleBillingPlan(plan, false ,premium)">Billed Monthly</label>
                <input class="cursor-pointer" type="checkbox" [id]="plan.id" 
                [checked]="
                (plan.isYearly || (premium && premium.interval == 'yearly'))  && (( plan?.name == premium?.package_name) || ( plan?.name == demo?.package_name))" 
                [(ngModel)]="plan.isYearly"
                (change)="toggleBillingPlan(plan, (plan.isYearly ? false: true),premium)" [value]="plan.isYearly">
                <label class="switch_on cursor-pointer" (click)="toggleBillingPlan(plan, true,premium)">
                  Billed Yearly
                </label>
              </div>
              <div class="premium-plan_box">
                <div class="plan_box">
                  <div class="d-flex align-items-center justify-content-between gap-2">
                    <h3>{{ plan.name }}</h3>
                    
                    <!-- Display this only if there is an active premium plan -->
                    <div class="premium_button py-1 px-3" *ngIf="(( plan?.name==premium?.package_name ) || ( plan?.name==demo?.package_name ))">
                      <span class="px-1">
                        <svg width="22" height="23" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                          <path d="M464 0H112c-4 0-7.8 2-10 5.4L2 152.6c-2.9 4.4-2.6 10.2 .7 14.2l276 340.8c4.8 5.9 13.8 5.9 18.6 0l276-340.8c3.3-4.1 3.6-9.8 .7-14.2L474.1 5.4C471.8 2 468.1 0 464 0zm-19.3 48l63.3 96h-68.4l-51.7-96h56.8zm-202.1 0h90.7l51.7 96H191l51.6-96zm-111.3 0h56.8l-51.7 96H68l63.3-96zm-43 144h51.4L208 352 88.3 192zm102.9 0h193.6L288 435.3 191.2 192zM368 352l68.2-160h51.4L368 352z">
                          </path>
                        </svg>
                      </span>
                      <span>You have an active {{ plan.name }} Plan</span>
                    </div>
                  </div>
              
                  <!-- Plan price and frequency -->
                  <div class="premium-currency">
                    <h6>
                      {{ plan.isYearly || (premium && premium.interval == 'yearly')  ? plan.priceYearly : plan.priceMonthly }}
                      <sub class="premium-month_title">.-{{ plan.currency }}/{{ plan.isYearly || (premium && premium.interval == 'yearly')  ? 'Year' : 'Month' }}</sub>
                    </h6>
                  </div>
              
                  <!-- Choose Plan Button -->
                  <div class="row">
                    <div class="col-lg-12">
                      <button
                        class="choose-plan-btn"
                        [disabled]="(( plan?.name==premium?.package_name ) || ( plan?.name==demo?.package_name ))"
                        (click)="openCouponDialog(plan.isYearly ? plan.yearData.id : plan.monthData.id)"
                      >
                        Choose Plan
                      </button>
                    </div>
                  </div>
                </div>
              
                <hr class="premium_list-line">
              
                <!-- Plan includes list -->
                <div class="plan_box premium-plan-list">
                  <h3>{{ plan.name }} Includes</h3>
                  <ul class="premium_list">
                    <li *ngFor="let feature of plan.includes">
                      <label>
                        <input type="checkbox" checked="checked" disabled>
                        <span class="checkmark"></span>{{ feature }}
                      </label>
                    </li>
                  </ul>
                </div>
              </div>
              
            </div>

            <!-- countries plans -->
            <div class="col-lg-4 my-2 ">
              <div class="subscription-switch mb-2">
                <label class="switch_off cursor-pointer" >Billed Monthly</label>
                  <input type="checkbox" class="cursor-pointer">
                <label class="switch_on cursor-pointer">Billed Yearly</label>
              </div>
              
              <div class="premium-plan_box ">
                <div class="plan_box">
                  <div class="d-flex align-items-center justify-content-between gap-2">
                    <h3>Multi-Country Plan</h3>
                    <div class="premium_button  py-1 px-3"  *ngIf="getActiveMultiCountryPlanCount() > 0">
                      <span class="px-1">
                        <svg width="22" height="23" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                          <path d="M464 0H112c-4 0-7.8 2-10 5.4L2 152.6c-2.9 4.4-2.6 10.2 .7 14.2l276 340.8c4.8 5.9 13.8 5.9 18.6 0l276-340.8c3.3-4.1 3.6-9.8 .7-14.2L474.1 5.4C471.8 2 468.1 0 464 0zm-19.3 48l63.3 96h-68.4l-51.7-96h56.8zm-202.1 0h90.7l51.7 96H191l51.6-96zm-111.3 0h56.8l-51.7 96H68l63.3-96zm-43 144h51.4L208 352 88.3 192zm102.9 0h193.6L288 435.3 191.2 192zM368 352l68.2-160h51.4L368 352z">
                          </path>
                        </svg>
                      </span>
                      <span class="ps-2">{{getActiveMultiCountryPlanCount()}} Active Multi-Country Plan</span>
                      <button class="premium_btn" (click)="editPlanPopup(selectedPlan?.id,country)">
                        <svg width="22" height="23" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M3 17.7505V21.5005H6.75L17.81 10.4405L14.06 6.69049L3 17.7505ZM20.71 7.54049C20.8027 7.44798 20.8762 7.33809 20.9264 7.21712C20.9766 7.09614 21.0024 6.96646 21.0024 6.83549C21.0024 6.70452 20.9766 6.57484 20.9264 6.45387C20.8762 6.33289 20.8027 6.223 20.71 6.13049L18.37 3.79049C18.2775 3.69779 18.1676 3.62424 18.0466 3.57406C17.9257 3.52388 17.796 3.49805 17.665 3.49805C17.534 3.49805 17.4043 3.52388 17.2834 3.57406C17.1624 3.62424 17.0525 3.69779 16.96 3.79049L15.13 5.62049L18.88 9.37049L20.71 7.54049Z" fill="#787878"></path>
                        </svg>
                      </button>
                    </div>
                  </div>
                  <div class="premium-currency">
                    <h6>{{ selectedPlan?.isYearly ? selectedPlan?.priceYearly : selectedPlan?.priceMonthly }}
                      <sub class="premium-month_title">.-{{ selectedPlan?.currency }}/{{ selectedPlan?.isYearly ? 'Year' : 'Month' }}</sub>
                    </h6>
                  </div>

                  <div class="row  multi-country-select ">
                    <div class="col-lg-12 plan-2">
                      <button class="choose-plan-btn" (click)="editPlanPopup(otherPlans,country)" >Choose Plan</button>
                    </div>
                  </div>
                </div>
                
                <hr class="premium_list-line">
                
                <div class="plan_box premium-plan-list">
                  <h3>Multi-Country Plan Includes</h3>
                  <ul class="premium_list">
                    <li *ngFor="let feature of selectedPlan?.includes">
                      <label>
                        <input type="checkbox" checked="checked" disabled>
                        <span class="checkmark"></span>{{ feature }}
                      </label>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            
            <!-- boosted plans -->
            <div class="col-lg-4 my-2" *ngFor="let plan of boostedPlans">          
              <div class="subscription-switch mb-2">
                <label class="switch_off cursor-pointer" (click)="toggleBillingPlan(plan, false ,booster)">Billed Monthly</label>
                <input type="checkbox"  class="switch_on cursor-pointer"  [id]="plan.id" 
                [(ngModel)]="plan.isYearly"
                [checked]="plan.isYearly || (booster && booster.interval == 'yearly')" (change)="toggleBillingPlan(plan, (plan.isYearly ? false: true),booster)">
                <label class="switch_on cursor-pointer" (click)="toggleBillingPlan(plan, true,booster)">Billed Yearly</label>
              </div>
              <div class="premium-plan_box">
                <div class="plan_box">
                  <div class="d-flex align-items-center justify-content-between gap-2">
                    <h3>{{ plan.name }}</h3>
                    <div class="premium_button py-1 px-3 "  *ngIf="plan?.is_package_active=='active' ">
                      <span class="px-1">
                        <svg width="22" height="23" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                          <path d="M464 0H112c-4 0-7.8 2-10 5.4L2 152.6c-2.9 4.4-2.6 10.2 .7 14.2l276 340.8c4.8 5.9 13.8 5.9 18.6 0l276-340.8c3.3-4.1 3.6-9.8 .7-14.2L474.1 5.4C471.8 2 468.1 0 464 0zm-19.3 48l63.3 96h-68.4l-51.7-96h56.8zm-202.1 0h90.7l51.7 96H191l51.6-96zm-111.3 0h56.8l-51.7 96H68l63.3-96zm-43 144h51.4L208 352 88.3 192zm102.9 0h193.6L288 435.3 191.2 192zM368 352l68.2-160h51.4L368 352z">
                          </path>
                        </svg>
                      </span>
                      <span>You have active {{ plan.name }} Plan</span>
                    </div>
                  </div>
                  <div class="premium-currency">
                    <h6>{{ plan.isYearly || (booster && booster.interval == 'yearly') ? plan.priceYearly : plan.priceMonthly }}<sub class="premium-month_title">.-{{ plan.currency }}/{{ plan.isYearly || (booster && booster.interval == 'yearly') ? 'Year' : 'Month' }}</sub></h6>
                  </div>
                  <div class="row">
                    <div class="col-lg-12">
                      <button class="choose-plan-btn" [disabled]="(plan?.is_package_active=='active') " (click)="addBoostPopup(plan.isYearly==true ? plan.yearData.id : plan.monthData.id )" >Choose Plan</button>
                    </div>
                  </div>
                </div>
                <hr class="premium_list-line">
                <div class="plan_box premium-plan-list">
                  <h3>{{ plan.name }} Includes</h3>
                  <ul class="premium_list">
                    <li *ngFor="let feature of plan.includes">
                      <label>
                        <input type="checkbox" checked="checked" disabled>
                        <span class="checkmark"></span>{{ feature }}
                      </label>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  </div>
</div>
