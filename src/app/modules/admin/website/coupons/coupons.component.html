<div class="card rounded-end rounded-0 overflow-hidden p-0 webpage-card">
  <div class="card-header p-3">
    <div class="d-flex align-items-center justify-content-between website-header-bar">
      <div class="d-flex align-items-center heading w-100">
        <h2 class="card-title mb-0 me-3">{{'couponCode' | translate }}</h2>
        <a (click)="createCoupon()" class="btn btn-success web-create-bg">{{'createNew' | translate }}</a>
      </div>
      <div class="card-search p-1">
        <div class="input-group">
          <span class="input-group-text">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g opacity="0.5">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M9.1441 11.9881C11.8739 10.8279 13.1464 7.67448 11.9863 4.94465C10.8261 2.21481 7.67265 0.942328 4.94281 2.10248C2.21297 3.26263 0.94049 6.4161 2.10064 9.14593C3.2608 11.8758 6.41426 13.1483 9.1441 11.9881Z"
                  stroke="black" class="custom-search" stroke-width="1.2" stroke-linecap="round"
                  stroke-linejoin="round"></path>
                <path d="M10.8408 10.8398L15.0062 15.0058" stroke="black" class="custom-search" stroke-width="1.2"
                  stroke-linecap="round" stroke-linejoin="round"></path>
              </g>
            </svg>
          </span><input type="text" placeholder="{{'searchCoupons' | translate}}" (keyup)="applyFilter($event)" aria-label="Username"
            aria-describedby="basic-addon1" class="form-control ps-0" />
        </div>
        <div class="d-flex align-items-center pe-2 border-start ps-3 cursor-pointer filter-svg"
          (click)="showFilterPopup()">
          <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg" class="me-2">
            <path
              d="M16.5938 6.23438H1.40625C1.18247 6.23438 0.967862 6.14054 0.809629 5.97352C0.651395 5.80649 0.5625 5.57996 0.5625 5.34375C0.5625 5.10754 0.651395 4.88101 0.809629 4.71398C0.967862 4.54696 1.18247 4.45313 1.40625 4.45312H16.5938C16.8175 4.45312 17.0321 4.54696 17.1904 4.71398C17.3486 4.88101 17.4375 5.10754 17.4375 5.34375C17.4375 5.57996 17.3486 5.80649 17.1904 5.97352C17.0321 6.14054 16.8175 6.23438 16.5938 6.23438ZM13.7812 10.3906H4.21875C3.99497 10.3906 3.78036 10.2968 3.62213 10.1298C3.46389 9.96274 3.375 9.73621 3.375 9.5C3.375 9.26379 3.46389 9.03726 3.62213 8.87023C3.78036 8.70321 3.99497 8.60938 4.21875 8.60938H13.7812C14.005 8.60938 14.2196 8.70321 14.3779 8.87023C14.5361 9.03726 14.625 9.26379 14.625 9.5C14.625 9.73621 14.5361 9.96274 14.3779 10.1298C14.2196 10.2968 14.005 10.3906 13.7812 10.3906ZM10.4062 14.5469H7.59375C7.36997 14.5469 7.15536 14.453 6.99713 14.286C6.83889 14.119 6.75 13.8925 6.75 13.6562C6.75 13.42 6.83889 13.1935 6.99713 13.0265C7.15536 12.8595 7.36997 12.7656 7.59375 12.7656H10.4062C10.63 12.7656 10.8446 12.8595 11.0029 13.0265C11.1611 13.1935 11.25 13.42 11.25 13.6562C11.25 13.8925 11.1611 14.119 11.0029 14.286C10.8446 14.453 10.63 14.5469 10.4062 14.5469Z"
              fill="#787878"></path>
          </svg>
          <span class="input-filter-text">{{'filter' | translate }}</span>
        </div>
      </div>
    </div>
    <div class="d-flex align-items-center justify-content-between mt-3">
      <div class="d-flex align-items-center">
        <div class="dropdown  dropdown-coupon">
          <button (click)="selectAllCoupons()"
            class="btn btn-secondary dropdown-toggle dropdown-toggle-checkbox coupon-main-checkbox" type="button">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault1" [checked]="allSelected" />
            </div>
            <svg width="9" height="5" viewBox="0 0 9 5" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M4.08333 3.25838L0.995812 0.170854C0.768006 -0.0569515 0.39866 -0.0569515 0.170854 0.170854C-0.0569515 0.39866 -0.0569515 0.768006 0.170854 0.995812L3.67085 4.49581C3.89866 4.72362 4.26801 4.72362 4.49581 4.49581L7.99581 0.995812C8.22362 0.768006 8.22362 0.39866 7.99581 0.170854C7.76801 -0.0569515 7.39866 -0.0569515 7.17085 0.170854L4.08333 3.25838Z"
                fill="#646464" />
            </svg>
          </button>
          <!-- <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><a class="dropdown-item" href="#">Something else here</a></li>
              </ul> -->
        </div>
        <a class="btn btn-outline-white" (click)="bulkPublish()">
          <svg id="users-icon" width="24" height="24" viewBox="0 0 24 25" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M6 19.5516L7.975 18.7516C7.80833 18.2682 7.65433 17.7766 7.513 17.2766C7.37167 16.7766 7.259 16.2766 7.175 15.7766L6 16.5766V19.5516ZM10 18.5016H14C14.3 17.8349 14.5417 17.0226 14.725 16.0646C14.9083 15.1066 15 14.1272 15 13.1266C15 11.4766 14.725 9.91423 14.175 8.43956C13.625 6.9649 12.9 5.82723 12 5.02656C11.1 5.82656 10.375 6.96423 9.825 8.43956C9.275 9.9149 9 11.4772 9 13.1266C9 14.1266 9.09167 15.1059 9.275 16.0646C9.45833 17.0232 9.7 17.8356 10 18.5016ZM12 13.5016C11.45 13.5016 10.9793 13.3059 10.588 12.9146C10.1967 12.5232 10.0007 12.0522 10 11.5016C9.99933 10.9509 10.1953 10.4802 10.588 10.0896C10.9807 9.6989 11.4513 9.5029 12 9.50156C12.5487 9.50023 13.0197 9.69623 13.413 10.0896C13.8063 10.4829 14.002 10.9536 14 11.5016C13.998 12.0496 13.8023 12.5206 13.413 12.9146C13.0237 13.3086 12.5527 13.5042 12 13.5016ZM18 19.5516V16.5766L16.825 15.7766C16.7417 16.2766 16.6293 16.7766 16.488 17.2766C16.3467 17.7766 16.1923 18.2682 16.025 18.7516L18 19.5516ZM12 2.47656C13.65 3.67656 14.896 5.20156 15.738 7.05156C16.58 8.90156 17.0007 11.0516 17 13.5016L19.1 14.9016C19.3833 15.0849 19.6043 15.3266 19.763 15.6266C19.9217 15.9266 20.0007 16.2432 20 16.5766V22.5016L15.025 20.5016H8.975L4 22.5016V16.5766C4 16.2432 4.07933 15.9266 4.238 15.6266C4.39667 15.3266 4.61733 15.0849 4.9 14.9016L7 13.5016C7 11.0516 7.421 8.90156 8.263 7.05156C9.105 5.20156 10.3507 3.67656 12 2.47656Z"
              fill="#787878" />
          </svg>

          {{'publish' | translate }}</a>
        <a class="btn btn-outline-white" (click)="bulkDraft()">
          <svg id="users-icon" class="me-1" width="22" height="24" viewBox="0 0 21 21" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M17.5 2.16797C17.7321 2.16797 17.9546 2.25577 18.1187 2.41205C18.2828 2.56833 18.375 2.78029 18.375 3.0013V6.13214L16.625 7.7988V3.83464H4.375V17.168H16.625V14.8696L18.375 13.203V18.0013C18.375 18.2223 18.2828 18.4343 18.1187 18.5906C17.9546 18.7468 17.7321 18.8346 17.5 18.8346H3.5C3.26794 18.8346 3.04538 18.7468 2.88128 18.5906C2.71719 18.4343 2.625 18.2223 2.625 18.0013V3.0013C2.625 2.78029 2.71719 2.56833 2.88128 2.41205C3.04538 2.25577 3.26794 2.16797 3.5 2.16797H17.5ZM19.0557 7.8413L20.293 9.01964L13.4872 15.5013L12.2483 15.4996L12.25 14.323L19.0557 7.8413ZM11.375 10.5013V12.168H7V10.5013H11.375ZM14 7.16797V8.83464H7V7.16797H14Z"
              fill="#787878" />
          </svg>

          {{'draft' | translate }}</a>
        <a class="btn btn-outline-white" (click)="confirmDeletion()">
          <svg id="users-icon" width="22" height="24" viewBox="0 0 22 23" fill="none" xmlns="http://www.w3.org/2000/svg"
            class="me-1">
            <path
              d="M5.49967 17.5589C5.49967 18.5112 6.32467 19.2904 7.33301 19.2904H14.6663C15.6747 19.2904 16.4997 18.5112 16.4997 17.5589V7.16999H5.49967V17.5589ZM17.4163 4.57277H14.208L13.2913 3.70703H8.70801L7.79134 4.57277H4.58301V6.30425H17.4163V4.57277Z"
              fill="#787878"></path>
          </svg>
          {{'delete' | translate }}</a>
      </div>
      <div class="d-flex align-items-center">
        <div class="items-count" style="

             font-size: 14px;
              font-weight: 500;
            ">
          {{coupons.length}} {{'items' | translate}}
        </div>

      </div>
    </div>
  </div>

  <div class="table-responsive">
    <table mat-table [dataSource]="coupons" class="table table-hover table-striped table-users ">

      <!-- Position Column -->
      <ng-container matColumnDef="#">
        <th mat-header-cell *matHeaderCellDef> </th>
        <td mat-cell *matCellDef="let element">
          <span class="form-check align-self-center me-2">
            <input type="checkbox" class="form-check-input" [checked]="selectedIds.includes(element.id)"
              (change)="onCheckboxChange(element)" />
            <label for="defaultCheck1" class="form-check-label"></label>
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="Name">
        <th mat-header-cell *matHeaderCellDef> {{ 'name' | translate }} </th>
        <td mat-cell *matCellDef="let element"> {{ element.title }}</td>
      </ng-container>

      <ng-container matColumnDef="Discount">
        <th mat-header-cell *matHeaderCellDef>{{ 'discount' | translate }} </th>
        <td mat-cell *matCellDef="let element">
          <span *ngIf="element.discount_type == 'amount_off'">${{ element.discount }}</span>
          <span *ngIf="element.discount_type == 'percent_off'">{{ element.discount }}%</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="Type">
        <th mat-header-cell *matHeaderCellDef> {{ 'type' | translate }} </th>
        <td mat-cell *matCellDef="let element">
          <span *ngIf="element.discount_type == 'amount_off'">${{ element.discount }} discount</span>
          <span *ngIf="element.discount_type == 'percent_off'">% discount</span>
        </td>
      </ng-container>
      <ng-container matColumnDef="Code">
        <th mat-header-cell *matHeaderCellDef> {{ 'code' | translate }}</th>
        <td mat-cell *matCellDef="let element"> {{ element.coupon_code }}</td>
      </ng-container>
      <ng-container matColumnDef="Uses">
        <th mat-header-cell *matHeaderCellDef> {{ 'uses' | translate }} </th>
        <td mat-cell *matCellDef="let element"> - </td>
      </ng-container>

      <ng-container matColumnDef="Status">
        <th mat-header-cell *matHeaderCellDef class="text-center"> {{ 'status' | translate }} </th>
        <td mat-cell *matCellDef="let element" class="text-center">
          <span *ngIf="element.status == 'published'" class="bg_success">{{ 'published' | translate }}</span>
          <span *ngIf="element.status == 'expired'" class="bg_reject text-white">{{ 'expired' | translate }}</span>
          <span *ngIf="element.status == 'draft'" class="bg_pending">{{ 'draft' | translate }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="Deactivate">
        <th mat-header-cell *matHeaderCellDef class="text-center"> {{ 'Deactivate' | translate }} </th>
        <td mat-cell *matCellDef="let element" class="text-center cursor-pointer">

          <svg id="users-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"
            (click)="deactivateCoupon(element.id)">
            <g clip-path="url(#clip0_2433_6069)">
              <path
                d="M17.071 2.92896C13.1658 -0.976321 6.83451 -0.976321 2.92896 2.92896C-0.976321 6.83425 -0.976321 13.1655 2.92896 17.071C6.83425 20.9763 13.1655 20.9763 17.071 17.071C20.9763 13.1657 20.9763 6.8345 17.071 2.92896ZM14.3462 3.8863L3.88655 14.3457C1.79893 11.4168 2.06915 7.32448 4.69695 4.69668C7.32475 2.06888 11.4173 1.79866 14.346 3.88628L14.3462 3.8863ZM16.114 5.65376C18.2014 8.58273 17.9311 12.6753 15.3031 15.3028C12.6755 17.9308 8.58298 18.2013 5.65403 16.1134L16.1137 5.65376H16.114Z"
                fill="#787878" />
            </g>
            <defs>
              <clipPath id="clip0_2433_6069">
                <rect width="20" height="20" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </td>
      </ng-container>
      <ng-container matColumnDef="Edit">
        <th mat-header-cell *matHeaderCellDef class="text-center"> {{ 'edit' | translate }}</th>
        <td mat-cell *matCellDef="let element" class="text-center cursor-pointer">
          <svg id="users-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
            (click)="editCoupon(element)">
            <path
              d="M3 17.4585V20.4985C3 20.7785 3.22 20.9985 3.5 20.9985H6.54C6.67 20.9985 6.8 20.9485 6.89 20.8485L17.81 9.93854L14.06 6.18854L3.15 17.0985C3.05 17.1985 3 17.3185 3 17.4585ZM20.71 7.03854C20.8027 6.94602 20.8762 6.83614 20.9264 6.71516C20.9766 6.59419 21.0024 6.46451 21.0024 6.33354C21.0024 6.20257 20.9766 6.07289 20.9264 5.95191C20.8762 5.83094 20.8027 5.72105 20.71 5.62854L18.37 3.28854C18.2775 3.19583 18.1676 3.12229 18.0466 3.07211C17.9257 3.02192 17.796 2.99609 17.665 2.99609C17.534 2.99609 17.4043 3.02192 17.2834 3.07211C17.1624 3.12229 17.0525 3.19583 16.96 3.28854L15.13 5.11854L18.88 8.86854L20.71 7.03854Z"
              fill="#787878" />
          </svg>
        </td>
      </ng-container>

      <ng-container matColumnDef="Remove">
        <th mat-header-cell *matHeaderCellDef class="text-center"> {{ 'remove' | translate }}</th>
        <td mat-cell *matCellDef="let element" class="text-center cursor-pointer">
          <svg id="users-icon" width="22" height="23" viewBox="0 0 22 23" fill="none" xmlns="http://www.w3.org/2000/svg"
            class="me-1" (click)="confirmSingleDeletion(element.id)">
            <path
              d="M5.49967 17.5589C5.49967 18.5112 6.32467 19.2904 7.33301 19.2904H14.6663C15.6747 19.2904 16.4997 18.5112 16.4997 17.5589V7.16999H5.49967V17.5589ZM17.4163 4.57277H14.208L13.2913 3.70703H8.70801L7.79134 4.57277H4.58301V6.30425H17.4163V4.57277Z"
              fill="#787878"></path>
          </svg>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      <tr class="mat-row user-empty-tr" *matNoDataRow>
        <td [attr.colspan]="displayedColumns.length" class="user-empty-td">
          <app-loader *ngIf="isLoading"></app-loader>
          <div *ngIf="coupons.length == 0 && !isLoading" style="text-align: center;">{{ 'noRecordFound' | translate }}</div>
        </td>
      </tr>
    </table>
  </div>
</div>